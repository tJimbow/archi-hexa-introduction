<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 700" width="1000" height="700">
  <defs>
    <style>
      .box { fill: #2d3748; stroke: #4a5568; stroke-width: 2; }
      .domain-box { fill: #1a365d; stroke: #2c5282; stroke-width: 3; }
      .primary-box { fill: #2c7a7b; stroke: #319795; stroke-width: 2; }
      .secondary-box { fill: #744210; stroke: #975a16; stroke-width: 2; }
      .core-box { fill: #553c9a; stroke: #6b46c1; stroke-width: 2; }
      .text { fill: #e2e8f0; font-family: Arial, sans-serif; font-size: 14px; }
      .text-bold { fill: #f7fafc; font-family: Arial, sans-serif; font-size: 16px; font-weight: bold; }
      .text-small { fill: #cbd5e0; font-family: Arial, sans-serif; font-size: 12px; }
    </style>
    <marker id="arrowhead-blue" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#90cdf4" />
    </marker>
    <marker id="arrowhead-orange" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#fbbf24" />
    </marker>
    <marker id="arrowhead-green" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#4ade80" />
    </marker>
    <marker id="arrowhead-red" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#f97316" />
    </marker>
  </defs>

  <!-- Background -->
  <rect width="1000" height="700" fill="#1a202c"/>

  <!-- USER / EXTERNAL SYSTEM (en haut à gauche, au-dessus des Primary Adapters) -->
  <rect x="50" y="30" width="180" height="60" class="box" rx="5"/>
  <text x="140" y="55" class="text" text-anchor="middle">Utilisateur</text>
  <text x="140" y="75" class="text" text-anchor="middle">(Navigateur Web)</text>

  <!-- PRIMARY ADAPTERS (sous l'utilisateur) -->
  <rect x="50" y="120" width="180" height="150" class="primary-box" rx="5"/>
  <text x="140" y="145" class="text-bold" text-anchor="middle">PRIMARY ADAPTERS</text>
  <text x="140" y="165" class="text-small" text-anchor="middle">(infrastructure/primary)</text>
  <line x1="60" y1="175" x2="220" y2="175" stroke="#319795" stroke-width="1"/>
  <text x="70" y="195" class="text">• Vue Components</text>
  <text x="70" y="215" class="text">• CurtailmentPrograms</text>
  <text x="70" y="235" class="text">• Search.vue</text>
  <text x="70" y="255" class="text">• Layout.vue</text>

  <!-- INFRASTRUCTURE EXTERNE (en haut à droite, au-dessus des Secondary Adapters) -->
  <rect x="770" y="30" width="180" height="60" class="box" rx="5"/>
  <text x="860" y="55" class="text" text-anchor="middle">.NET Core Web APIs</text>
  <text x="860" y="75" class="text" text-anchor="middle">+ Azure Functions</text>

  <!-- SECONDARY ADAPTERS (sous l'infrastructure externe) -->
  <rect x="770" y="120" width="180" height="150" class="secondary-box" rx="5"/>
  <text x="860" y="145" class="text-bold" text-anchor="middle">SECONDARY ADAPTERS</text>
  <text x="860" y="165" class="text-small" text-anchor="middle">(infrastructure/secondary)</text>
  <line x1="780" y1="175" x2="940" y2="175" stroke="#975a16" stroke-width="1"/>
  <text x="790" y="195" class="text">• ProgramSearch</text>
  <text x="790" y="215" class="text">• EntityGet</text>
  <text x="790" y="235" class="text">• ProgramCancel</text>
  <text x="790" y="255" class="text">• (Axios HTTP)</text>

  <!-- DOMAIN (HEXAGONE) -->
  <rect x="100" y="320" width="800" height="300" class="domain-box" rx="10"/>
  <text x="500" y="350" class="text-bold" text-anchor="middle" font-size="18">DOMAINE (HEXAGONE)</text>

  <!-- PORTS (UN SEUL ENSEMBLE AU CENTRE) -->
  <rect x="350" y="370" width="300" height="100" class="box" rx="5" style="fill: #4a5568; stroke: #90cdf4; stroke-width: 3;"/>
  <text x="500" y="395" class="text-bold" text-anchor="middle" font-size="16">PORTS (Interfaces)</text>
  <text x="500" y="415" class="text-small" text-anchor="middle">(domain/*/...Port.ts)</text>
  <line x1="360" y1="425" x2="640" y2="425" stroke="#90cdf4" stroke-width="1"/>
  <text x="370" y="445" class="text" font-size="12">• ProgramSearchPort</text>
  <text x="370" y="460" class="text" font-size="12">• EntityPort / ProgramCancelPort</text>

  <!-- MÉTIER (CORE) en dessous -->
  <rect x="350" y="490" width="300" height="110" class="core-box" rx="5"/>
  <text x="500" y="515" class="text-bold" text-anchor="middle" font-size="16">MÉTIER (CORE)</text>
  <text x="500" y="535" class="text-small" text-anchor="middle">(domain/*/...ts)</text>
  <line x1="360" y1="545" x2="640" y2="545" stroke="#6b46c1" stroke-width="1"/>
  <text x="500" y="565" class="text" text-anchor="middle" font-size="13">• Entités: Program, Entity</text>
  <text x="500" y="585" class="text" text-anchor="middle" font-size="13">• Règles métier</text>

  <!-- Bottom labels -->
  <text x="220" y="650" class="text-bold" text-anchor="middle">CÔTÉ GAUCHE (PRIMARY)</text>
  <text x="220" y="670" class="text-small" text-anchor="middle">Vue.js UTILISE les Ports (injecte)</text>

  <text x="780" y="650" class="text-bold" text-anchor="middle">CÔTÉ DROIT (SECONDARY)</text>
  <text x="780" y="670" class="text-small" text-anchor="middle">IMPLÉMENTE les Ports (Axios)</text>

  <!-- ARROWS - Drawn AFTER all boxes so they appear on top -->

  <!-- Green arrow: User interacts with Primary Adapters -->
  <path d="M 140 90 L 140 120" stroke="#4ade80" stroke-width="3" fill="none" stroke-dasharray="5,3" marker-end="url(#arrowhead-green)"/>
  <text x="30" y="110" fill="#4ade80" font-family="Arial, sans-serif" font-size="12px" font-weight="bold">Utilisateur</text>
  <text x="30" y="125" fill="#4ade80" font-family="Arial, sans-serif" font-size="12px" font-weight="bold">interagit</text>

  <!-- Blue arrow: Primary Adapters UTILISE les Ports -->
  <path d="M 200 270 L 380 370" stroke="#90cdf4" stroke-width="3" fill="none" marker-end="url(#arrowhead-blue)"/>
  <text x="240" y="310" fill="#90cdf4" font-family="Arial, sans-serif" font-size="12px" font-weight="bold">utilise (inject)</text>

  <!-- Blue arrow: Ports utilisent le Métier -->
  <path d="M 500 470 L 500 490" stroke="#90cdf4" stroke-width="2" fill="none" marker-end="url(#arrowhead-blue)"/>
  <text x="510" y="485" fill="#90cdf4" font-family="Arial, sans-serif" font-size="11px" font-style="italic">utilise</text>

  <!-- Orange arrow: Secondary Adapters IMPLÉMENTENT les Ports -->
  <path d="M 800 270 L 620 370" stroke="#f97316" stroke-width="3" fill="none" marker-end="url(#arrowhead-red)"/>
  <text x="680" y="310" fill="#f97316" font-family="Arial, sans-serif" font-size="12px" font-weight="bold">implémente</text>

  <!-- Red arrow: Secondary Adapters call External APIs -->
  <path d="M 860 120 L 860 90" stroke="#f97316" stroke-width="3" fill="none" stroke-dasharray="5,3" marker-end="url(#arrowhead-red)"/>
  <text x="900" y="100" fill="#f97316" font-family="Arial, sans-serif" font-size="12px" font-weight="bold">Appelle</text>
  <text x="900" y="115" fill="#f97316" font-family="Arial, sans-serif" font-size="12px" font-weight="bold">APIs externes</text>

</svg>

